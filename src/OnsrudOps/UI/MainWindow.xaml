<Window x:Class="OnsrudOps.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:OnsrudOps"
        xmlns:avalonEdit="http://icsharpcode.net/sharpdevelop/avalonedit"
        xmlns:c="OnsrudOps.UI"
        mc:Ignorable="d"
        Title="Onsrud Operations"
        MinHeight="500"
        MinWidth="800"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize"
        WindowState="Maximized"
        Closing="Window_Closing"
        FontSize="11" Icon="/UI/resources/icon.ico">

    <Window.CommandBindings>
        <CommandBinding Command="ApplicationCommands.Open" Executed="OpenCommand_Executed"/>
        <CommandBinding Command="ApplicationCommands.Save" Executed="SaveCommand_Executed"/>
        <CommandBinding Command="ApplicationCommands.New" Executed="NewCommand_Executed"/>
    </Window.CommandBindings>

    <Window.Resources>
        <Run x:Key="UndoGlyph" Text="&#xE7A7;" FontFamily="{StaticResource SymbolThemeFontFamily}" Foreground="{StaticResource Accent1Brush}" x:Shared="false"/>
        <Run x:Key="RedoGlyph" Text="&#xE7A6;" FontFamily="{StaticResource SymbolThemeFontFamily}" Foreground="{StaticResource Accent1Brush}" x:Shared="false"/>
        <Run x:Key="ScrollToEndGlyph" Text="&#xE70D;" FontFamily="{StaticResource SymbolThemeFontFamily}" Foreground="{StaticResource Accent1Brush}" x:Shared="false"/>
        <Run x:Key="ScrollToTopGlyph" Text="&#xE70E;" FontFamily="{StaticResource SymbolThemeFontFamily}" Foreground="{StaticResource Accent1Brush}" x:Shared="false"/>
        <Run x:Key="SendGlyph" Text="&#xE725;" FontFamily="{StaticResource SymbolThemeFontFamily}" Foreground="{StaticResource Accent1Brush}" x:Shared="false"/>
        <Run x:Key="OpenGlyph" Text="&#xF12B;" FontFamily="{StaticResource SymbolThemeFontFamily}" Foreground="{StaticResource Accent1Brush}" x:Shared="false"/>
        <Run x:Key="SaveGlyph" Text="&#xE74E;" FontFamily="{StaticResource SymbolThemeFontFamily}" Foreground="{StaticResource Accent1Brush}" x:Shared="false"/>
        <Run x:Key="NewGlyph" Text="&#xE710;" FontFamily="{StaticResource SymbolThemeFontFamily}" Foreground="{StaticResource Accent1Brush}" x:Shared="false"/>
        <Run x:Key="ExitGlyph" Text="&#xE711;" FontFamily="{StaticResource SymbolThemeFontFamily}" Foreground="Red" x:Shared="false"/>
    </Window.Resources>
    
    <Grid>

        <Grid.RowDefinitions>
            <RowDefinition x:Name="MenuRow" Height="50"/>
            <RowDefinition x:Name="MainRow" Height="*"/>
            <RowDefinition x:Name="StatusBarRow" Height="60"/>
        </Grid.RowDefinitions>

        <Menu VerticalContentAlignment="Stretch"
              HorizontalContentAlignment="Stretch"
              Cursor="Hand">
            <MenuItem Header="File">
                <MenuItem Command="ApplicationCommands.New" Icon="{StaticResource NewGlyph}" Header="New File"/>
                <Separator/>
                <MenuItem Command="ApplicationCommands.Open" Icon="{StaticResource OpenGlyph}" Header="Open Files"/>
                <MenuItem Command="ApplicationCommands.Save" Icon="{StaticResource SaveGlyph}" Header="Save Files"/>
                <Separator/>
                <MenuItem Icon="{StaticResource ExitGlyph}" Header="Exit App" Click="ExitMenuItem_Click"/>
            </MenuItem>
            <MenuItem Header="Settings">
                <MenuItem Header="Application Settings" Click="SettingsMenu_Click"/>
            </MenuItem>
        </Menu>

        <TabControl HorizontalContentAlignment="Stretch"
                    x:Name="TabControl"
                    Grid.Row="1">
            <TabItem Header="Send G Code Files"
                     Cursor="Hand"
                     Foreground="{StaticResource Accent1Brush}"
                     Width="200">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="36"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition MinWidth="300"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition MinWidth="600"/>
                    </Grid.ColumnDefinitions>

                    <ToolBar Name="GCodeFileToolbar">
                        <Button x:Name="OpenFiles_Btn"
                                Command="ApplicationCommands.Open"
                                ToolTip="Open G Code Files">
                            <Button.Content>
                                <TextBlock>
                                    <StaticResource ResourceKey="OpenGlyph"/>
                                    <Run>  Open Files</Run>
                                </TextBlock>
                            </Button.Content>
                        </Button>
                        <Button x:Name="SendFiles_Btn"
                                ToolTip="Send G Code Files"
                                Click="SendFiles_Btn_Click">
                            <Button.Content>
                                <TextBlock>
                                    <StaticResource ResourceKey="SendGlyph"/>
                                    <Run>  Send All Files</Run>
                                </TextBlock>
                            </Button.Content>
                        </Button>
                        <Button x:Name="SendSingleFileButton"
                                ToolTip="Send a single file through serial port"
                                Click="SendSingleFileButton_Click">
                            <Button.Content>
                                <TextBlock>
                                    <StaticResource ResourceKey="SendGlyph"/>
                                    <Run>  Send Current File</Run>
                                </TextBlock>
                            </Button.Content>
                        </Button>
                    </ToolBar>

                    <ListBox Name="CodeFile_LstBx"
                             Grid.Column="0"
                             Grid.Row="1"
                             Margin="5,5,5,5"
                             SelectionChanged="CodeFile_LstBx_SelectionChanged">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
                                    <TextBlock MouseLeftButtonUp="Label_MouseLeftButtonUp" 
                                                Cursor="Hand"
                                                HorizontalAlignment="Right"
                                                FontSize="16"
                                                Width="16">
                                        <StaticResource ResourceKey="ExitGlyph"/>
                                    </TextBlock>
                                    <Label Content="{Binding FileName}" Margin="24,0,0,0"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                    <GridSplitter Grid.Column="1"
                                  Grid.Row="1"
                                  Width="5"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Stretch"
                                  ShowsPreview="True"
                                  Background="{StaticResource Accent1Brush}"
                                  Foreground="{StaticResource Accent1Brush}"/>
                    <ToolBar Name="TextEditorToolBar"
                             Grid.Column="2">
                        <Button x:Name="EditorUndoButton"
                                Click="EditorUndoButton_Click"
                                Content="{StaticResource UndoGlyph}"
                                ToolTip="Undo Last Operation"/>
                        <Button x:Name="EditorRedoButton"
                                Click="EditorRedoButton_Click"
                                Content="{StaticResource RedoGlyph}"
                                ToolTip="Redo Last Operation"/>
                        <Separator/>
                        <Button x:Name="EditorScrollToEndButton"
                                Click="EditorScrollToEndButton_Click"
                                Content="{StaticResource ScrollToEndGlyph}"
                                ToolTip="Scroll to end of File"/>
                        <Button x:Name="EditorScrollToTopButton"
                                Click="EditorScrollToTopButton_Click"
                                Content="{StaticResource ScrollToTopGlyph}"
                                ToolTip="Scroll to top of File"/>
                    </ToolBar>
                    <avalonEdit:TextEditor
                        TextChanged="TextEditor_TextChanged"
                        Name="textEditor"
                        FontFamily="Hack"
                        FontSize="10pt"
                        Grid.Column="2"
                        Grid.Row="1"
                        Background="Transparent"
                        ShowLineNumbers="True"
                        Foreground="{StaticResource TextFillColorPrimaryBrush}"/>
                    <Expander Header="Serial Port Events" 
                              IsExpanded="False" 
                              ExpandDirection="Up"
                              Grid.Row="2" 
                              Grid.ColumnSpan="3"
                              VerticalContentAlignment="Stretch"
                              VerticalAlignment="Bottom">
                        <RichTextBox Name="SerialPort_TxtBlck"
                                     HorizontalAlignment="Stretch"
                                     VerticalAlignment="Stretch"
                                     IsReadOnly="True"
                                     Grid.Row="2" 
                                     Grid.ColumnSpan="3"
                                     Height="250">
                            <FlowDocument Name="SerialPortDisplay" FontSize="12"/>
                        </RichTextBox>
                    </Expander>
                </Grid>

            </TabItem>
            <TabItem Header="Create Slab Surface Program"
                     Name="CreateSlabSurfaceProgramTabItem"
                     Cursor="Hand"
                     Foreground="{StaticResource Accent1Brush}"
                     Width="200">
                <Grid Margin="5,5,5,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Orientation="Vertical" HorizontalAlignment="Stretch" Width="Auto">
                        <GroupBox Header="Program" BorderBrush="{StaticResource Accent1Brush}">
                            <StackPanel Orientation="Vertical">
                                <Label Content="Program Name" HorizontalAlignment="Center"/>
                                <TextBox Name="ProgramName_TxtBx" Width="280" Text="{Binding Parameters.ProgramName, Mode=OneTime}"/>
                            </StackPanel>
                        </GroupBox>
                        <GroupBox Header="Part Properties" HorizontalAlignment="Stretch" Margin="0,10,0,0" BorderBrush="{StaticResource Accent1Brush}">
                            <StackPanel Orientation="Vertical" HorizontalAlignment="Stretch">
                                <StackPanel Orientation="Horizontal" Margin="5,5,5,5">
                                    <Label Content="Part Width:  "/>
                                    <TextBox Name="PartWidth_TxtBx" Width="120" Text="{Binding Parameters.PartWidth, Mode=OneTime}"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="5,5,5,5">
                                    <Label Content="Part Length: "/>
                                    <TextBox Name="PartLength_TxtBx" Width="120" Text="{Binding Parameters.PartLength, Mode=OneTime}"/>
                                </StackPanel>
                                <Rectangle HorizontalAlignment="Stretch" Height="2" Fill="{StaticResource Accent1Brush}" Margin="5,15,5,15"/>
                                <StackPanel Orientation="Horizontal" Margin="5,5,5,5">
                                    <Label Content="Starting Thickness:  "/>
                                    <TextBox Name="StartingThickness_TxtBx" Width="120" Text="{Binding Parameters.StartingThickness, Mode=OneTime}"/>
                                    <Label Content="    Cut Per Pass: "/>
                                    <TextBox Name="VerticalStep_TxtBx" Width="120" Text="{Binding Parameters.VerticalStep, Mode=OneTime}"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="5,5,5,5">
                                    <Label Content="Finished Thickness: "/>
                                    <TextBox Name="FinishedThickness_TxtBx" Width="120" Text="{Binding Parameters.FinishedThickness, Mode=OneTime}"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>
                        <Button Name="CreateCode_Btn" Content="Create G Code" Width="180" HorizontalAlignment="Right" VerticalAlignment="Bottom" 
                                Click="CreateCode_Btn_Click" Background="{StaticResource Accent1Brush}"/>
                    </StackPanel>
                </Grid>
            </TabItem>
        </TabControl>

        <StatusBar HorizontalAlignment="Left"
                   HorizontalContentAlignment="Stretch"
                   VerticalAlignment="Stretch"
                   Grid.Row="2"
                   FontSize="11">
            <StatusBarItem Name="SerialStatusLabel"
                           Content="Serial Port Disconnected..."
                           Foreground="{StaticResource ErrorBrush}"
                           Width="200"/>
            <Button x:Name="ConnectToSerialPort_Btn"
                    Width="200"
                    Content="Connect"
                    Click="ConnectToSerialPort_Btn_Click"
                    Height="48"
                    Margin="0,0,0,0"/>
            <Separator/>
            <ProgressBar x:Name="ProgressBar" Height="24" Width="400" Foreground="{StaticResource SuccessBrush}"/>
            <Separator/>
            <StatusBarItem x:Name="SerialConnectionConfigLabel" HorizontalAlignment="Stretch"/>
        </StatusBar>

    </Grid>
</Window>
